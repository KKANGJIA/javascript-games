<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ«ìì•¼êµ¬</title>
    <style>
      #div_correct { width:100px; height:50px; margin-top: 30px;border:1px solid black;}
      #div_logs {width:400px; height:auto; margin-top: 30px;border:1px solid black;}
    </style>
</head>
<body>
  <form id="form" onsubmit="return false;">
    <input type="text" id="input"/>
    <button>í™•ì¸</button>
  </form>
  <div id="div_correct" >ì •ë‹µ: <span id="correct"></span></div>
  <div id="div_logs">ê¸°ë¡: <span id="logs"></span></div>

  <script>
    "use strict"

    //ì •ì˜ë¶€
    let strike = 0; //ìŠ¤íŠ¸ë¼ì´í¬
    let ball = 0; //ì•ˆíƒ€
    let chance = 10;

    let correct = document.querySelector('#correct');
    let input = document.querySelector('#input');
    let button = document.querySelector('button');
    let logs = document.querySelector('#logs');
    
    //ìˆ«ìë½‘ê¸°, ìµœì†Œê°’ê³¼ ìµœëŒ€ê°’ ì§€ì •í•œ ë‚œìˆ˜ë½‘ê¸° : ( Math.random() * ( ìµœëŒ€ê°’ - ìµœì†Œê°’ )  ) + ìµœì†Œê°’
    correct.textContent = parseInt(Math.random() * (9999 - 1000) + 1000);
    correct.style.display = 'none'; //ì •ë‹µì„ ë§ì¶”ê¸° ì „ê¹Œì§€ ê²°ê³¼ë¥¼ ìˆ¨ê¸°ê¸°

    //ì‹¤í–‰ë¶€
    button.addEventListener('click', () => {
      if (typeof(input.value) != 'number' && input.value.length != 4){
        alert('4ìë¦¬ì˜ ì •ìˆ˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
      } else {
        if (input.value === correct.textContent) {
          logs.textContent = `${input.value}, ê²°ê³¼: í™ˆëŸ°`
          alert('í™ˆëŸ°ì…ë‹ˆë‹¤.ğŸ˜');
          correct.style.display = 'block'; //ì •ë‹µì„ ë§ì¶”ë©´ ê²°ê³¼ë¥¼ ë³´ì´ê¸°
          return;
        } else{
          if (chance > 0) {
            for(let i=0; i<4; i++) {
              if (input.value[i] === correct.textContent[i] & i == i) {
                strike += 1;
              } else if (input.value[i] === correct.textContent[i] | i != i) {
                ball += 1;
              } else if (input.value === correct.textContent) {
                logs.textContent = `${input.value}, ê²°ê³¼: í™ˆëŸ°`
                alert('í™ˆëŸ°ì…ë‹ˆë‹¤.ğŸ˜');
                correct.style.display = 'block'; //ì •ë‹µì„ ë§ì¶”ë©´ ê²°ê³¼ë¥¼ ë³´ì´ê¸°
                return;
              }
            } //end of for
            logs.textContent = `${input.value}, ê²°ê³¼: ${strike}ìŠ¤íŠ¸ë¼ì´í¬ ${ball}ë³¼, ë‚¨ì€ ê¸°íšŒ: ${chance-1}`
            chance -= 1;
          } else {
            correct.style.display = 'block'; //ì‹¤íŒ¨í•˜ë©´ ê²°ê³¼ ë³´ì—¬ì£¼ê¸°
            alert('Out! You lost!');
          }
           
        }
      } //end of type check
    })
    






  </script>
</body>
</html>